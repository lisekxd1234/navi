{% extends "base.html" %}
{% block title %}Faktury i rachunki{% endblock %}

{% block content %}
<section class="actions">
    <h2>Faktury i rachunki</h2>
    <div>
        <a class="btn btn-secondary" href="{{ url_for('export_invoices_pdf') }}">Eksport ewidencji (PDF)</a>
        <a class="btn btn-primary" href="{{ url_for('new_invoice') }}" style="margin-left: 0.5rem;">Dodaj dokument</a>
    </div>
</section>

{% if invoices %}
<table>
    <thead>
    <tr>
        <th>Data</th>
        <th>Numer</th>
        <th>Typ</th>
        <th>Kontrahent</th>
        <th>Kwota brutto</th>
        <th>Akcje</th>
    </tr>
    </thead>
    <tbody>
    {% for invoice in invoices %}
        <tr>
            <td>{{ invoice.issue_date.strftime('%Y-%m-%d') }}</td>
            <td>{{ invoice.number }}</td>
            <td>{{ invoice.document_type|title }}</td>
            <td>{{ invoice.client_name }}</td>
            <td>{{ invoice.gross_amount|pl_currency }}</td>
            <td>
                <a class="btn-link" href="{{ url_for('invoice_detail', invoice_id=invoice.id) }}">Podgląd</a> |
                <a class="btn-link" href="{{ url_for('edit_invoice', invoice_id=invoice.id) }}">Edytuj</a>
                <form method="post" action="{{ url_for('delete_invoice', invoice_id=invoice.id) }}" style="display:inline; margin-left:0.5rem;" onsubmit="return confirm('Na pewno usunąć dokument {{ invoice.number }}?');">
                    <button type="submit" class="btn-link">Usuń</button>
                </form>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
    <p>Nie dodano jeszcze żadnych dokumentów sprzedażowych.</p>
{% endif %}
{% endblock %}
